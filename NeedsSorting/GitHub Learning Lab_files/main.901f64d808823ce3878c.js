!function(e){function t(t){for(var a,c,s=t[0],l=t[1],i=t[2],d=0,m=[];d<s.length;d++)c=s[d],r[c]&&m.push(r[c][0]),r[c]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,i||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={1:0},o=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,a){n=r[e]=[t,a]});t.push(n[2]=a);var o,s=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=function(e){return c.p+""+({}[e]||e)+"."+{3:"4867e50a1c3046c7a4e3",4:"cfcf09a84143d0909bb9"}[e]+".js"}(e),o=function(t){l.onerror=l.onload=null,clearTimeout(i);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,c=new Error("Loading chunk "+e+" failed.\n("+a+": "+o+")");c.type=a,c.request=o,n[1](c)}r[e]=void 0}};var i=setTimeout(function(){o({type:"timeout",target:l})},12e4);l.onerror=l.onload=o,s.appendChild(l)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/public/",c.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var u=l;o.push([511,0]),n()}({330:function(e,t,n){var a={"./af":186,"./af.js":186,"./ar":187,"./ar-dz":188,"./ar-dz.js":188,"./ar-kw":189,"./ar-kw.js":189,"./ar-ly":190,"./ar-ly.js":190,"./ar-ma":191,"./ar-ma.js":191,"./ar-sa":192,"./ar-sa.js":192,"./ar-tn":193,"./ar-tn.js":193,"./ar.js":187,"./az":194,"./az.js":194,"./be":195,"./be.js":195,"./bg":196,"./bg.js":196,"./bm":197,"./bm.js":197,"./bn":198,"./bn.js":198,"./bo":199,"./bo.js":199,"./br":200,"./br.js":200,"./bs":201,"./bs.js":201,"./ca":202,"./ca.js":202,"./cs":203,"./cs.js":203,"./cv":204,"./cv.js":204,"./cy":205,"./cy.js":205,"./da":206,"./da.js":206,"./de":207,"./de-at":208,"./de-at.js":208,"./de-ch":209,"./de-ch.js":209,"./de.js":207,"./dv":210,"./dv.js":210,"./el":211,"./el.js":211,"./en-au":212,"./en-au.js":212,"./en-ca":213,"./en-ca.js":213,"./en-gb":214,"./en-gb.js":214,"./en-ie":215,"./en-ie.js":215,"./en-il":216,"./en-il.js":216,"./en-nz":217,"./en-nz.js":217,"./eo":218,"./eo.js":218,"./es":219,"./es-do":220,"./es-do.js":220,"./es-us":221,"./es-us.js":221,"./es.js":219,"./et":222,"./et.js":222,"./eu":223,"./eu.js":223,"./fa":224,"./fa.js":224,"./fi":225,"./fi.js":225,"./fo":226,"./fo.js":226,"./fr":227,"./fr-ca":228,"./fr-ca.js":228,"./fr-ch":229,"./fr-ch.js":229,"./fr.js":227,"./fy":230,"./fy.js":230,"./gd":231,"./gd.js":231,"./gl":232,"./gl.js":232,"./gom-latn":233,"./gom-latn.js":233,"./gu":234,"./gu.js":234,"./he":235,"./he.js":235,"./hi":236,"./hi.js":236,"./hr":237,"./hr.js":237,"./hu":238,"./hu.js":238,"./hy-am":239,"./hy-am.js":239,"./id":240,"./id.js":240,"./is":241,"./is.js":241,"./it":242,"./it.js":242,"./ja":243,"./ja.js":243,"./jv":244,"./jv.js":244,"./ka":245,"./ka.js":245,"./kk":246,"./kk.js":246,"./km":247,"./km.js":247,"./kn":248,"./kn.js":248,"./ko":249,"./ko.js":249,"./ky":250,"./ky.js":250,"./lb":251,"./lb.js":251,"./lo":252,"./lo.js":252,"./lt":253,"./lt.js":253,"./lv":254,"./lv.js":254,"./me":255,"./me.js":255,"./mi":256,"./mi.js":256,"./mk":257,"./mk.js":257,"./ml":258,"./ml.js":258,"./mr":259,"./mr.js":259,"./ms":260,"./ms-my":261,"./ms-my.js":261,"./ms.js":260,"./mt":262,"./mt.js":262,"./my":263,"./my.js":263,"./nb":264,"./nb.js":264,"./ne":265,"./ne.js":265,"./nl":266,"./nl-be":267,"./nl-be.js":267,"./nl.js":266,"./nn":268,"./nn.js":268,"./pa-in":269,"./pa-in.js":269,"./pl":270,"./pl.js":270,"./pt":271,"./pt-br":272,"./pt-br.js":272,"./pt.js":271,"./ro":273,"./ro.js":273,"./ru":274,"./ru.js":274,"./sd":275,"./sd.js":275,"./se":276,"./se.js":276,"./si":277,"./si.js":277,"./sk":278,"./sk.js":278,"./sl":279,"./sl.js":279,"./sq":280,"./sq.js":280,"./sr":281,"./sr-cyrl":282,"./sr-cyrl.js":282,"./sr.js":281,"./ss":283,"./ss.js":283,"./sv":284,"./sv.js":284,"./sw":285,"./sw.js":285,"./ta":286,"./ta.js":286,"./te":287,"./te.js":287,"./tet":288,"./tet.js":288,"./tg":289,"./tg.js":289,"./th":290,"./th.js":290,"./tl-ph":291,"./tl-ph.js":291,"./tlh":292,"./tlh.js":292,"./tr":293,"./tr.js":293,"./tzl":294,"./tzl.js":294,"./tzm":295,"./tzm-latn":296,"./tzm-latn.js":296,"./tzm.js":295,"./ug-cn":297,"./ug-cn.js":297,"./uk":298,"./uk.js":298,"./ur":299,"./ur.js":299,"./uz":300,"./uz-latn":301,"./uz-latn.js":301,"./uz.js":300,"./vi":302,"./vi.js":302,"./x-pseudo":303,"./x-pseudo.js":303,"./yo":304,"./yo.js":304,"./zh-cn":305,"./zh-cn.js":305,"./zh-hk":306,"./zh-hk.js":306,"./zh-tw":307,"./zh-tw.js":307};function r(e){var t=o(e);return n(t)}function o(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=330},344:function(e,t,n){},345:function(e,t){window.onerror=function(e,t,n,a,r){var o=document.querySelector('meta[name="csrf-token"]').getAttribute("content");fetch("/_needles",{method:"POST",body:JSON.stringify({message:e,source:t,lineno:n,colno:a,err:{name:r.name,stack:r.stack,message:r.message}}),headers:{"Content-Type":"application/json","CSRF-Token":o}})}},349:function(e,t){var n=new URLSearchParams(window.location.search).get("overlay"),a=document.querySelectorAll("button[data-box-overlay-id]");Array.from(a).forEach(function(e){var t=e.dataset.boxOverlayId,a=document.querySelector(".Overlay#".concat(t));if(a){var r=a.querySelector("iframe");e.addEventListener("click",l);var o=function(){e.setAttribute("aria-expanded",!1),a.setAttribute("hidden",!0),r&&r.contentWindow.postMessage(JSON.stringify({event:"command",func:"stopVideo",args:""}),"*")},c=a.querySelector(".js-box-overlay-close");if(!c)throw new Error("No overlay close button found");window.addEventListener("keyup",function(e){"Escape"===e.code&&o()}),c.addEventListener("click",o);var s=a.querySelector("form");s&&!s.dataset.hasOwnProperty("disableClose")&&s.addEventListener("submit",o),n&&n===t&&l()}else console.warn("Overlay with id ".concat(t," not found"));function l(){var t="true"===e.getAttribute("aria-expanded")?"false":"true";e.setAttribute("aria-expanded",t),a.removeAttribute("hidden"),r&&r.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}})},350:function(e,t){var n=document.querySelector(".js-enable-notifications");n&&document.body.classList.contains("logged-in")&&(window.Notification&&"granted"!==Notification.permission?n.addEventListener("click",function(){return Notification.requestPermission(function(e){"granted"===e&&n.parentElement.removeChild(n)})}):n.parentElement.removeChild(n))},352:function(e,t){var n=document.querySelector(".Overlay#unregister-box-overlay form");if(n){var a=n.querySelector("input#should_delete_form"),r=n.querySelector('input[name="_csrf"]').value,o=n.querySelector('button[type="submit"]');a.addEventListener("change",function(e){var t=e.target.checked;o.textContent=t?"Continue and delete ".concat(e.target.dataset.repo):"Continue"}),n.addEventListener("submit",function(e){e.preventDefault(),window.fetch("/".concat(e.target.dataset.course,"/unregister"),{method:"POST",credentials:"same-origin",body:JSON.stringify({shouldDelete:a.checked}),headers:{"Content-Type":"application/json","CSRF-Token":r}}).then(function(e){return e.json()}).then(function(e){e.success?window.location.reload():console.error(e.message)})})}},37:function(e,t,n){"use strict";n.r(t);var a=n(128),r=n.n(a),o=n(92),c=n.n(o),s=n(93),l=n.n(s),i=function(){function e(t){if(c()(this,e),!t.body)throw new Error("This flash must have a body");var n={style:"info",close:!0,onClose:function(e){return e},wrapper:document.querySelector(".flash-wrapper")};this.opts=r()({},n,t),this.addToDOM()}return l()(e,[{key:"addToDOM",value:function(){var e=this.opts,t=e.style,n=e.close,a=e.wrapper,r=e.body,o=document.createElement("div");o.classList.add("flash","flash-full","flash-".concat(t)),o.innerHTML='<div class="container-lg p-responsive">'.concat(r," ").concat(n?'<button class="flash-close js-flash-close" type="button">\n  <svg height="16" class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"></path></svg>\n</button>':"","</div>"),a.appendChild(o),this.opts.close&&this.registerCloseListener(o)}},{key:"registerCloseListener",value:function(e){var t=this;e.querySelector(".js-flash-close").addEventListener("click",function(){t.opts.onClose(),t.clearDOMNode()})}},{key:"clearDOMNode",value:function(){this.opts.wrapper.innerHTML=""}}]),e}();t.default=function(e){return new i(e)}},405:function(e,t){var n=document.querySelector(".js-org-select-menu"),a=document.querySelector(".js-org-select-overlay");function r(){n.removeAttribute("open"),a.style.display="none",a.removeEventListener("click",r)}n&&n.addEventListener("toggle",function(e){""===e.target.getAttribute("open")&&(a.style.display="block",a.addEventListener("click",r))})},406:function(e,t){var n=document.getElementById("eloquaForm");n&&n.addEventListener("submit",function(e){if(!1===n.checkValidity()){e.preventDefault(),e.stopPropagation();var t=Array.from(n.querySelectorAll("input, textarea")),a=t.filter(function(e){return e.checkValidity()}),r=t.filter(function(e){return!e.checkValidity()});a.forEach(function(e){return e.parentElement.parentElement.classList.remove("errored")}),r.forEach(function(e){return e.parentElement.parentElement.classList.add("errored")})}else document.getElementById("eloquaForm").submit();n.classList.add("validated")})},407:function(e,t){var n=document.querySelector(".js-upload-file-input");if(n){var a=document.querySelector(".js-upload-license-btn"),r=document.querySelector(".js-upload-license-file-name");n.addEventListener("change",function(e){var t=n.files[0].name;return r.textContent=t,r.style.display="block",a.removeAttribute("disabled")})}},511:function(e,t,n){"use strict";n.r(t);n(344),n(345);var a=n(70),r=n.n(a);document.querySelectorAll("[data-ga-click]").forEach(function(e){e.addEventListener("click",function(e){var t=e.target.dataset.gaClick;if(t){var n=t.split(", "),a=r()(n,3),o=a[0],c=a[1],s=a[2];window.ga("send","event",o,c,s)}})});n(349);var o=n(69),c=n(37),s=n(340),l=n.n(s),i=n(92),u=n.n(i),d=n(93),m=n.n(d),p="https:"===location.protocol?"wss":"ws",f=new WebSocket("".concat(p,"://").concat(location.host)),h=new(function(){function e(){u()(this,e),this.events=new Map}return m()(e,[{key:"on",value:function(e,t){this.events.set(e,t)}},{key:"emit",value:function(e,t){this.events.forEach(function(n,a){a===e&&n(t)})}}]),e}());f.onmessage=function(e){var t=JSON.parse(e.data),n=t.event,a=t.data;h.emit(n,a)};var v=h,b=document.querySelector(".js-register-form-wrapper"),y=document.querySelector(".js-registration-progress-steps");if(b){var g=b.querySelector(".js-register-form");g.addEventListener("submit",function(e){e.preventDefault();var t=l()(g,{hash:!0,empty:!0});b.style.display="none",y.style.display="block";var n=Object(o.a)();window.fetch("".concat(window.location.pathname,"/register"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","CSRF-Token":t._csrf},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){if(e.success)e.redirect?window.location.href=e.redirect:window.location.reload();else{n.deleteSelf(),Object(c.default)({style:"error",body:e.message});var t=document.querySelector('button[data-box-overlay-id="register-box-overlay"]'),a=document.querySelector(".Overlay#register-box-overlay");t.setAttribute("aria-expanded",!1),a.setAttribute("hidden",!0),b.style.display="block",y.style.display="none",Array.from(document.querySelectorAll(".".concat("step--completed"))).forEach(function(e){return e.classList.remove("step--completed")});var r=document.querySelector(".".concat("step--current"));r&&r.classList.remove("step--current")}})});var E=Array.from(y.querySelectorAll(".js-registration-progress-step"));v.on("registration-progress",function(e){var t=E.find(function(t){return t.dataset.step===e.step});if(t)switch(e.state){case"start":t.classList.add("step--current");break;case"done":t.classList.remove("step--current"),t.classList.add("step--completed")}})}n(350);var j=n(18),x=n.n(j);v.on("step-completed",function(e){var t=e.step,n=e.nextStep,a=e.course,r=t.slug,o=t.dateCompleted,c=document.querySelector('.js-course-step[data-step="'.concat(r,'"]')),s=document.querySelector(".js-next-step"),l=document.querySelector(".js-course-progress");if(s)if(n){if(s.innerHTML=n.title,document.title="".concat(n.title," | ").concat(a.title," | GitHub Learning Lab"),window.Notification&&"denied"!==Notification.permission){var i=new Notification(n.title,{body:n.description,icon:"/public/images/avatar.png"});n.link&&i.addEventListener("click",function(){window.open(n.link,"_blank")})}if(l){var u=l.querySelector(".js-course-progress-current"),d=l.querySelector(".js-course-progress-max"),m=l.querySelector(".progress");u.textContent=t.order+1,m.style.width=100*(t.order+1/parseInt(d.textContent,10))}}else window.location.reload();if(c){var p=c.querySelector(".js-step-dateCompleted");if(p){var f=document.createElement("span");f.classList.add("f6","ml-2","lh-condensed","tooltipped","tooltipped-n"),f.dataset.ariaLabel=o,f.innerHTML="Completed ".concat(x()(o).fromNow()),p.appendChild(f)}c.classList.add("step--completed"),c.classList.remove("step--current"),c.nextElementSibling.classList.add("step--current")}});n(352);var k=document.querySelector(".Overlay#renew-box-overlay form");if(k){var S=k.querySelector('input[name="_csrf"]').value;k.addEventListener("submit",function(e){var t=Object(o.a)();e.preventDefault(),window.fetch("/".concat(e.target.dataset.course,"/renew"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","CSRF-Token":S}}).then(function(e){return e.json()}).then(function(e){if(t.deleteSelf(),e.success)window.location.reload();else{var n=e.message||"Something went wrong! Please try again later.";Object(c.default)({style:"error",body:n})}})})}var w=n(78),N=n.n(w),C=document.querySelectorAll(".js-filter-course-item"),q=n(356);C.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t={encode:!1},n=e.target;if("A"!==e.target.tagName){var a=e.target.closest(".js-filter-course-item");if(!a)return;n=a}var r=n.textContent.trim(),o=q.parse(location.search).tag;if(o){var c=o.split(","),s=c.indexOf(r);if(-1===s)window.location.search=q.stringify({tag:"".concat(r,",").concat(o)},t);else{var l=[].concat(N()(c.slice(0,s)),N()(c.slice(s+1)));window.location.search=q.stringify({tag:l.join(",")},t)}}else window.location.search=q.stringify({tag:r},t)})});var O=n(124),A=n.n(O),L=["js-public-btn","js-private-btn"],F=document.querySelector(L.map(function(e){return".".concat(e)}).join());if(F){var T,R=F.classList.contains("js-public-btn")?"public":"private";F.addEventListener("click",function(e){if(confirm("Are you sure you want to change this course to ".concat(R,"?"))){var t=e.target.dataset,n=t.course,a=t.csrf;T=Object(o.a)(),fetch("/".concat(n,"/admin/toggle-private"),{method:"PUT",credentials:"same-origin",headers:{"CSRF-Token":a}}).then(function(e){return e.json()}).then(function(e){T.deleteSelf(),e.success?window.location.reload():Object(c.default)({style:"error",body:e.message})})}})}var z,P=document.querySelector(".js-course-publish-btn");P&&P.addEventListener("click",function(e){if(confirm("Are you sure you want to publish this course?")){var t=e.target.dataset.course;z=Object(o.a)(),fetch("/".concat(t,"/admin/publish"),{method:"PUT",credentials:"same-origin",headers:{"CSRF-Token":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(e){return e.json()}).then(function(e){z.deleteSelf(),e.success?window.location.reload():Object(c.default)({style:"error",body:e.message})})}});var D=["#79b8ff","#2188ff","#0366d6","#005cc5","#044289","#032f62","#05264c"],M=document.querySelector(".js-course-charts");if(M){var B=M.dataset.version;A.a.defaults.global.defaultFontFamily="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",fetch(location.pathname+"/data",{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){var t=e.counts,n=e.totals;A.a.Line("js-chart-course-steps-percentage",{type:"line",data:{labels:n.map(function(e){return e.title}),datasets:[{label:"Percentage",data:n.map(function(e){return e.percentage}),borderWidth:2,borderColor:D[3],pointBackgroundColor:D[3]}]},options:{legend:{display:!1},title:{text:"Step completion, last 7 days, version ".concat(B),display:!0},scales:{yAxes:[{ticks:{min:0,max:100,callback:function(e){return"".concat(e,"%")}}}],xAxes:[{ticks:{autoSkip:!1,fontSize:12}}]}}}),A.a.Line("js-chart-course-steps",{type:"line",data:{labels:t.reduce(function(e,t){for(var n in t.count)t.count.hasOwnProperty(n)&&!e.includes(n)&&e.push(n);return e},[]),datasets:t.map(function(e,t){return{label:e.title,data:Object.keys(e.count).map(function(t){return parseInt(e.count[t])}),borderWidth:1,borderColor:D[t]||D[D.length+t],backgroundColor:"transparent"}})},options:{title:{text:"Individual step completion, last 7 days, version ".concat(B),display:!0},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})})}var I=document.querySelector(".js-sync-template-repo-btn");I&&I.addEventListener("click",function(e){if(confirm("Are you sure you want to sync this template repository?")){var t=e.target.dataset.csrf,n=Object(o.a)();fetch(location.pathname+"/sync",{method:"PUT",credentials:"same-origin",headers:{"CSRF-Token":t}}).then(function(e){return e.json()}).then(function(e){n.deleteSelf(),Object(c.default)({style:e.success?"success":"error",body:e.message})})}});var _={fullWidth:!0,title:{display:!1},legend:{display:!1},scales:{yAxes:[{ticks:{display:!1},gridLines:{display:!1,drawBorder:!1}}],xAxes:[{ticks:{display:!1},gridLines:{display:!1,drawBorder:!1}}]},layout:{padding:5}};function H(e,t){if(t.length<5){var n=document.querySelector("#".concat(e)).parentElement,a=n.querySelector("canvas"),r=n.querySelector(".js-missing-data");a.style.display="none",r.style.display="block"}else{var o=t.map(function(e){return e.date}),c=t.map(function(e){return parseInt(e.totalcount,10)});A.a.Line(e,{type:"line",data:{labels:o,datasets:[{data:c,label:"Registrations",borderColor:"#0366d6",borderWidth:2}]},options:_})}}document.querySelectorAll(".js-org-dash-course-charts").length>0&&fetch(location.pathname+"/data",{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){e.forEach(function(e){var t="js-".concat(e.id,"-chart-registrations"),n="js-".concat(e.id,"-chart-registrations-completed");H(t,e.registrations),H(n,e.completedRegistrations)})});var V=n(39),W=n.n(V),J=n(62),U=n.n(J),K=function(){function e(t,n){u()(this,e),this.loader=t,this.consl=n}return m()(e,[{key:"start",value:function(){var e=this;v.on("console-message",function(t){e.consl.classList.remove("d-none"),e.append(t)}),v.on("console-error",function(t){e.append(t)}),v.on("console-end",function(t){e.loader.deleteSelf(),e.append(t),Object(c.default)({style:t.success?"success":"error",body:t.message})})}},{key:"append",value:function(e){var t=e.time,n=e.message,a=e.color;a=a||"white";var r='<span class="text-gray-light mr-2">'.concat(t,"</span>"),o='<span class="text-'.concat(a,'">').concat(n,"</span>");this.consl.innerHTML+=r+o+"<br />"}}]),e}(),Y=document.querySelector(".js-create-course-form"),G=document.querySelector(".js-create-course-console");if(Y){var Z,Q=Array.from(Y.querySelectorAll('.select-menu input[type="radio"]')),X=Y.querySelector(".js-menu-target");Q.forEach(function(e){e.addEventListener("change",function(e){var t=e.target.value,n=e.target.parentElement.querySelector(".avatar").getAttribute("src");X.querySelector("span").textContent=t,X.querySelector("img").setAttribute("src",n),X.closest(".js-course-owner-select-menu").removeAttribute("open")})}),Y.addEventListener("submit",function(){var e=U()(W.a.mark(function e(t){var n,a,r,s,l,i,u,d,m;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=Y.querySelector('input[type="submit"]')).setAttribute("disabled",!0),a=Y.querySelector("input#repo"),r=a.value,s=Q.find(function(e){return e.checked}).value,Z=Object(o.a)(),l=new K(Z,G),i={repo:r},(u=Y.querySelector('input[name="visibility"]:checked'))&&(i.visibility=u.value),d=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e.prev=11,e.next=14,fetch("/".concat(s,"/new"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","CSRF-Token":d},body:JSON.stringify(i)}).then(function(e){return e.json()});case 14:m=e.sent,n.removeAttribute("disabled"),m.success?l.start():(Z.deleteSelf(),Object(c.default)({style:"error",body:m.message})),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(11),n.removeAttribute("disabled"),Z.deleteSelf(),console.error(e.t0),Object(c.default)({style:"error",body:"Something unexpected has gone wrong."});case 25:case"end":return e.stop()}},e,null,[[11,19]])}));return function(t){return e.apply(this,arguments)}}())}var $,ee=document.querySelector(".js-sync-course-btn");ee&&ee.addEventListener("click",function(e){if(confirm("Are you sure you want to sync this course?")){var t=e.target.dataset,n=t.course,a=t.csrf;$=Object(o.a)(),fetch("/courses/".concat(n,"/sync"),{method:"POST",credentials:"same-origin",headers:{"CSRF-Token":a}}).then(function(e){return e.json()}).then(function(e){e.success||Object(c.default)({style:"error",body:e.message})}),new K($,document.querySelector(".js-create-course-console")).start()}});n(405),n(406),n(407);var te=document.querySelector("#accept-terms-box-overlay");if(te){var ne=te.querySelector(".js-box-overlay-close");ne&&ne.addEventListener("click",function(){return te.setAttribute("hidden",!0)})}var ae=(te||document).querySelector(".js-btn-accept-terms");ae&&ae.addEventListener("click",function(e){var t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),n=e.target.dataset.termsSha;fetch("/terms/".concat(n),{method:"POST",credentials:"same-origin",headers:{"CSRF-Token":t}}).then(function(e){return e.json()}).then(function(e){ae.dataset.redirect?window.location.href=ae.dataset.redirect:(Object(c.default)({style:e.success?"success":"error",body:e.message}),window.scrollTo(0,0),e.success&&(ae.style.display="none",te&&te.setAttribute("hidden",!0)))})});var re=n(172),oe=n.n(re),ce=n(173),se=n.n(ce),le=n(82),ie=n.n(le),ue=n(174),de=n.n(ue),me=n(2),pe=n.n(me),fe=n(310),he=function(e){function t(e){var n;return u()(this,t),(n=oe()(this,se()(t).call(this,e))).update=n.update.bind(ie()(n)),n.title=pe.a.createRef(),n.course=pe.a.createRef(),n.url=pe.a.createRef(),n.contextTextarea=pe.a.createRef(),n}return de()(t,e),m()(t,[{key:"update",value:function(e){var t=this.props,n=t.resource,a=t.changeResource,r=t.index,o={context:this.contextTextarea.current.value,type:"radio"===e.target.type?e.target.value:n.type};return"course"===o.type?o.course=this.course.current?this.course.current.value:"":"url"===o.type&&(o.title=this.title.current?this.title.current.value:"",o.url=this.url.current?this.url.current.value:""),a(r,o)}},{key:"render",value:function(){var e=this.props,t=e.index,n=e.resource,a=e.deleteResource,r=e.showDelete,o="course"===n.type;return pe.a.createElement("li",{className:"Box box-shadow-large mr-3 d-flex flex-column",style:{flexShrink:0,flexGrow:0,flexBasis:"auto"}},pe.a.createElement("div",{className:"Box-header"},pe.a.createElement("label",null,pe.a.createElement("input",{type:"radio",name:"type-".concat(t),onChange:this.update,className:"mr-1",value:"course",checked:"course"===n.type}),"Course"),pe.a.createElement("label",{className:"ml-3"},pe.a.createElement("input",{type:"radio",name:"type-".concat(t),onChange:this.update,className:"mr-1",value:"url",checked:"url"===n.type}),"External URL")),pe.a.createElement("div",{className:"p-3"},o&&pe.a.createElement("dl",{className:"form-group required mt-0 required"},pe.a.createElement("dt",null,pe.a.createElement("label",{htmlFor:"course-".concat(t),className:"d-block"},"Course")),pe.a.createElement("dd",null,pe.a.createElement("input",{placeholder:"githubtraining/introduction-to-github",ref:this.course,className:"form-control width-full",onChange:this.update,id:"course-".concat(t),type:"text",name:"resources[".concat(t,"].course"),value:n.course,required:!0}))),!o&&pe.a.createElement(pe.a.Fragment,null,pe.a.createElement("dl",{className:"form-group required mt-0 required"},pe.a.createElement("dt",null,pe.a.createElement("label",{htmlFor:"title-".concat(t),className:"d-block"},"Title")),pe.a.createElement("dd",null,pe.a.createElement("input",{ref:this.title,className:"form-control width-full",onChange:this.update,id:"title-".concat(t),type:"text",name:"resources[".concat(t,"].title"),value:n.title,required:!0,placeholder:"GitHub Help"}))),pe.a.createElement("dl",{className:"form-group required mt-0"},pe.a.createElement("dt",null,pe.a.createElement("label",{htmlFor:"title-".concat(t),className:"d-block"},"URL")),pe.a.createElement("dd",null,pe.a.createElement("input",{ref:this.url,className:"form-control width-full",onChange:this.update,id:"url-".concat(t),type:"url",name:"resources[".concat(t,"].url"),value:n.url,required:!0,placeholder:"https://help.github.com"})))),pe.a.createElement("dl",{className:"form-group mt-0 required"},pe.a.createElement("dt",{className:"mb-0"},pe.a.createElement("label",{htmlFor:"context-".concat(t)},"Context")),pe.a.createElement("dd",null,pe.a.createElement("p",{className:"note mt-0 mb-2"},"The reason this resource is part of this Learning Path."),pe.a.createElement("textarea",{ref:this.contextTextarea,className:"form-control width-full",onChange:this.update,name:"resources[".concat(t,"].context"),id:"context-".concat(t),value:n.context,required:!0})))),r&&pe.a.createElement("div",{className:"border-top py-2 px-3 note text-right",style:{marginTop:"auto"}},pe.a.createElement("button",{type:"button",onClick:function(){return a(t)},className:"btn-link link-gray"},"Remove resource")))}}]),t}(me.Component),ve=function(e){function t(e){var n;return u()(this,t),(n=oe()(this,se()(t).call(this,e))).state={resources:[]},n.newResource=n.newResource.bind(ie()(n)),n.deleteResource=n.deleteResource.bind(ie()(n)),n.changeResource=n.changeResource.bind(ie()(n)),n.canSubmit=n.canSubmit.bind(ie()(n)),n.submit=n.submit.bind(ie()(n)),n.privateToggle=pe.a.createRef(),n.state={resources:[{type:"course",course:"",context:""}]},n}return de()(t,e),m()(t,[{key:"newResource",value:function(){this.setState({resources:[].concat(N()(this.state.resources),[{type:"course",title:"",context:""}])})}},{key:"changeResource",value:function(e,t){this.setState({resources:[].concat(N()(this.state.resources.slice(0,e)),[t],N()(this.state.resources.slice(e+1)))})}},{key:"deleteResource",value:function(e){this.setState({resources:[].concat(N()(this.state.resources.slice(0,e)),N()(this.state.resources.slice(e+1)))})}},{key:"canSubmit",value:function(){return this.state.title&&this.state.description&&this.state.resources.length>0}},{key:"submit",value:function(e){if(e.preventDefault(),this.canSubmit()){var t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),n=this.state,a=n.title,r=n.description,o=n.resources,s={title:a,description:r,private:this.privateToggle.current.checked,resources:o.map(function(e){var t=Object.assign({},e);return delete t.type,t})};return fetch(window.location.pathname,{method:"POST",credentials:"same-origin",body:JSON.stringify({json:s}),headers:{"CSRF-Token":t,"Content-Type":"application/json"}}).then(function(e){if(e.ok)return e.json();Object(c.default)({style:"error",body:"Something went wrong!"})}).then(function(e){Object(c.default)({style:e.success?"success":"error",body:e.message})})}}},{key:"render",value:function(){var e=this,t=this.canSubmit();return pe.a.createElement("form",{onSubmit:this.submit,className:"height-full d-flex"},pe.a.createElement("aside",{className:"col-3 border-right bg-white",style:{maxWidth:400}},pe.a.createElement("div",{className:"p-3"},pe.a.createElement("dl",{className:"form-group required mt-0"},pe.a.createElement("dt",null,pe.a.createElement("label",{htmlFor:"title"},"Learning Path title")),pe.a.createElement("dd",null,pe.a.createElement("input",{value:this.state.title,type:"text",required:!0,onChange:function(t){return e.setState({title:t.target.value})},name:"title",placeholder:"Learning Path title",className:"form-control",id:"title"}))),pe.a.createElement("dl",{className:"form-group required"},pe.a.createElement("dt",{className:"mb-0"},pe.a.createElement("label",{htmlFor:"description"},"Description")),pe.a.createElement("dd",null,pe.a.createElement("p",{className:"note mt-0 mb-2"},"Give your learners one good reason they should complete this path."),pe.a.createElement("textarea",{value:this.state.description,required:!0,onChange:function(t){return e.setState({description:t.target.value})},name:"description",className:"form-control width-full",id:"description"}))),pe.a.createElement("div",{className:"form-group my-4"},pe.a.createElement("div",{className:"form-checkbox"},pe.a.createElement("label",null,pe.a.createElement("input",{defaultChecked:!0,className:"js-privacy-toggle",id:"repository_private_false",name:"privacy",value:"public",type:"radio"}),"Public"),pe.a.createElement("svg",{"aria-hidden":"true",className:"text-gray float-left mr-2 octicon octicon-repo",height:"32",version:"1.1",viewBox:"0 0 12 16",width:"24"},pe.a.createElement("path",{"fill-rule":"evenodd",d:"M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"})),pe.a.createElement("span",{className:"note"},"Anyone can see this Learning Path.")),pe.a.createElement("div",{className:"form-checkbox"},pe.a.createElement("label",null,pe.a.createElement("input",{ref:this.privateToggle,className:"js-privacy-toggle",id:"repository_private_true",name:"privacy",value:"private",type:"radio"}),"Private"),pe.a.createElement("svg",{"aria-hidden":"true",style:{color:"rgba(115,92,15,0.5)"},className:"float-left mr-2 mb-2 octicon octicon-lock",height:"32",version:"1.1",viewBox:"0 0 12 16",width:"24"},pe.a.createElement("path",{"fill-rule":"evenodd",d:"M4 13H3v-1h1v1zm8-6v7c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h1V4c0-2.2 1.8-4 4-4s4 1.8 4 4v2h1c.55 0 1 .45 1 1zM3.8 6h4.41V4c0-1.22-.98-2.2-2.2-2.2-1.22 0-2.2.98-2.2 2.2v2H3.8zM11 7H2v7h9V7zM4 8H3v1h1V8zm0 2H3v1h1v-1z"})),pe.a.createElement("span",{className:"note"},"Only members of your organization will be able to see this Learning Path."))),pe.a.createElement("input",{type:"submit",disabled:!t,value:"Submit",className:"btn btn-primary width-full"}))),pe.a.createElement("div",{className:"bg-gray-light width-full"},pe.a.createElement("ol",{className:"height-full list-style-none pl-4 pr-6 pb-6 pt-3 js-new-path-resources d-flex flex-items-start",style:{overflow:"auto",width:"100%"}},this.state.resources.map(function(t,n,a){return pe.a.createElement(he,{key:n,resource:t,index:n,changeResource:e.changeResource,deleteResource:e.deleteResource,showDelete:a.length>1})}),pe.a.createElement("div",{className:"d-flex flex-justify-center flex-items-center flex-self-center"},pe.a.createElement("button",{type:"button",onClick:function(){return e.newResource()},className:"mr-3 f3 border js-new-path-btn-add-resource tooltipped tooltipped-nw text-gray btn-link no-underline circle",style:{width:40,height:40},"aria-label":"Add another resource"},"+")))))}}]),t}(me.Component),be=document.querySelector(".js-mount-new-path");be&&Object(fe.render)(pe.a.createElement(ve,null),be);var ye=n(327),ge=n.n(ye),Ee=n(128),je=n.n(Ee),xe=n(169),ke=n.n(xe),Se=n(63);function we(e){var t,n=e.id,a=e.type,r=void 0===a?"text":a,o=e.label,c=e.name,s=e.value,l=e.placeholder,i=e.description,u=e.required,d=void 0!==u&&u;return"checkbox"===r?pe.a.createElement("div",{className:"form-checkbox"},pe.a.createElement("label",null,pe.a.createElement("input",{type:"checkbox",checked:s,name:c}),o),i&&pe.a.createElement("p",{className:"note mb-2 mt-0"},i)):(t="textarea"===r?pe.a.createElement("textarea",{className:"form-control width-full",id:n,name:c,value:s||"",placeholder:l||o,required:d}):pe.a.createElement("input",{className:"form-control width-full",id:n,type:r,name:c,value:s||"",placeholder:l||o,required:d}),pe.a.createElement("dl",{className:"form-group mt-0 ".concat(d?"required":"")},pe.a.createElement("dt",null,pe.a.createElement("label",{htmlFor:n,className:"d-block"},o||c)),i&&pe.a.createElement("p",{className:"note mb-2 mt-0"},i),pe.a.createElement("dd",null,t)))}var Ne=n(328),Ce=n.n(Ne);function qe(e){var t=e.legend,n=e.description,a=e.children;return pe.a.createElement("fieldset",{className:"mb-3 p-3 rounded-1 border width-full"},pe.a.createElement("legend",{className:"text-bold pr-3 ml-n2 pl-2"},t),n&&pe.a.createElement("p",{className:"note mt-n2 mb-2"},n),a)}function Oe(e){var t,n=e.name,a=e.value,r=e.description;return t=a&&"object"===Ce()(a)?Object.keys(a).map(function(e){return pe.a.createElement("dl",{key:e,className:"form-group mt-0 width-full"},pe.a.createElement("dt",null,pe.a.createElement("label",null,e)),pe.a.createElement("dd",null,pe.a.createElement("input",{name:"".concat(n,".").concat(e),className:"form-control width-full",type:"text",placeholder:"value",value:a[e]})))}):pe.a.createElement("pre",{className:"border border-gray-light rounded-1 p-3 bg-gray-light"},pe.a.createElement("code",null,"data:","\n  ","key: value")),pe.a.createElement(qe,{legend:"Data",description:r},t)}function Ae(e){var t,n=e.name,a=e.description,r=e.label,o=e.value,c=e.optionKey;t=o&&Array.isArray(o)&&o.length?o.map(function(e,t){return pe.a.createElement("input",{className:"form-control width-full mb-1",key:t,type:"text",value:e,name:"".concat(n,".").concat(t)})}):pe.a.createElement("pre",{className:"border border-gray-light rounded-1 p-3 bg-gray-light"},pe.a.createElement("code",null,c,":","\n  ","- item"));var s="To add or remove items, update the YAML.";return a&&(s=a+" "+s),pe.a.createElement(qe,{legend:r,description:s},t)}function Le(e){var t=e.label,n=e.required,a=e.name,r=e.description,o=e.value,c=e.options;return pe.a.createElement("dl",{className:"form-group mt-0 ".concat(n?"required":"")},pe.a.createElement("dt",null,pe.a.createElement("label",{className:"d-block"},t)),r&&pe.a.createElement("p",{className:"note mb-2 mt-0"},r),pe.a.createElement("dd",null,pe.a.createElement("select",{className:"form-select",key:a,label:t,name:a,value:o,description:r,required:n},c.map(function(e){return pe.a.createElement("option",{key:e},e)}))))}var Fe=pe.a.createContext();function Te(e){var t=e.action,n=e.name,a=e.optionKey,r=e.option,o=e.value,c=e.openFile,s=e.addAction,l=e.removeAction,i=e.fetchSchema,u=e.error,d=e.stepIndex;if("data"===a)return pe.a.createElement(Oe,{name:n,value:o,description:r.description});var m=r.meta&&r.meta[0].label||r.label||a,p=r.flags&&"required"===r.flags.presence,f=r.meta&&r.meta[0].isResponse;if("string"===r.type&&!r.valids&&!f||"alternatives"===r.type)return pe.a.createElement(we,{label:m,name:n,value:o,description:r.description,required:p});if("string"===r.type&&(r.valids||f)){var h=Object(me.useContext)(Fe).tree,v=f?h.filter(function(e){return e.path.startsWith("responses/")}).map(function(e){return e.path.replace(/^responses\//,"")}):r.valids,b=pe.a.createElement(Le,{label:m,name:n,value:o,description:r.description,options:v,required:p});return f?pe.a.createElement(pe.a.Fragment,null,b,pe.a.createElement("button",{className:"btn-link text-small mb-3 d-block mt-n2",type:"button",onClick:function(){return c("responses/".concat(o))}},"Edit response file")):b}return"number"===r.type?pe.a.createElement(we,{label:m,type:"number",name:n,value:o,description:r.description,required:p}):"boolean"===r.type?pe.a.createElement(we,{label:m,type:"checkbox",name:n,checked:o,description:r.description,required:p}):"array"===r.type?"gate"===t.type&&"else"===a?pe.a.createElement(Ie,{description:r.description,stepIndex:d,actions:o,addAction:s,removeAction:l,basename:n,legend:"Else actions",fetchSchema:i,error:u,openFile:c}):pe.a.createElement(Ae,{label:m,description:r.description,name:n,value:o,optionKey:a}):"object"===r.type?pe.a.createElement(qe,{legend:m,description:r.description},Object.keys(r.children).map(function(e){var a="".concat(n,".").concat(e),c=r.children[e],s=o?o[e]:void 0;return pe.a.createElement(Te,{action:t,key:e,name:a,option:c,optionKey:e,value:s})})):(console.log(r.type),pe.a.createElement("span",null))}function Re(e){var t=e.detail,n=t.context,a=t.message;return pe.a.createElement("div",null,pe.a.createElement("p",{className:"m-0"},a),n&&n.error&&n.error.details&&pe.a.createElement(ze,{isNested:!0,details:n.error.details}))}function ze(e){var t=e.details,n=e.isNested,a=void 0!==n&&n;return pe.a.createElement("ul",{className:"".concat(a?"pl-3":"list-style-none")},t.map(function(e,t){return pe.a.createElement("li",{key:"error-".concat(t),className:0!==t?"mt-3":""},!a&&pe.a.createElement("p",{className:"m-0 text-bold"},e.path.join(".")),pe.a.createElement(Re,{detail:e}))}))}function Pe(e){var t=e.error;return t?t.details?pe.a.createElement("div",{className:"flash flash-error text-mono text-small mt-2"},pe.a.createElement(ze,{details:t.details})):pe.a.createElement("div",{className:"flash flash-error text-mono text-small mt-2"},pe.a.createElement("strong",{className:"d-block"},"There was an error while parsing the YAML code:"),t):null}function De(e){var t=e.stepIndex,n=e.action,a=e.actionIndex,o=e.basename,c=e.open,s=void 0!==c&&c,l=e.addAction,i=e.removeAction,u=e.fetchSchema,d=e.error,m=e.openFile;if(!n||!n.type)return null;var p=Object(me.useState)(null),f=r()(p,2),h=f[0],v=f[1],b=Object(me.useState)(!0),y=r()(b,2),g=y[0],E=y[1];Object(me.useEffect)(function(){u(n.type).then(function(e){v(e),E(!1)}).catch(function(){v(null),E(!1)})},[n.type]);var j=null;if(d&&d.details){var x=d.details.filter(function(e){return e.path.join(".")==="".concat(o,".").concat(a)});x.length&&(j=x.map(function(e,t){return pe.a.createElement("div",{key:t,className:"flash flash-error text-mono text-small mb-2 position-static"},pe.a.createElement(ze,{details:e.context.error.details}))}))}var k="d-block border rounded-1 border-gray-light bg-gray py-1 px-2 text-mono";if(g)return pe.a.createElement("span",{className:k},"Loading...");if(!g&&!h)return pe.a.createElement("span",{className:k},"Error fetching schema for ",n.type);var S=j&&j.length;return pe.a.createElement("details",{className:"action border rounded-1 border-gray-light",open:s},pe.a.createElement("summary",{className:"".concat(S?"bg-red-light":"bg-gray"," py-1 px-2 text-mono border-gray-light")},a,": ",n.type,S&&pe.a.createElement("span",{className:"Counter Counter--gray ml-2"},j.length)),pe.a.createElement("div",{className:"p-3"},j,h.description&&pe.a.createElement("p",{className:"mb-3"},h.description),Object.keys(h.children).map(function(e){var r="".concat(o,".").concat(a,".").concat(e),c=h.children[e];return pe.a.createElement(Te,{key:e,action:n,name:r,option:c,optionKey:e,value:n[e],openFile:m,stepIndex:t,addAction:l,removeAction:i,fetchSchema:u,error:d})}),pe.a.createElement(we,{label:"Action Id",description:pe.a.createElement("span",null,pe.a.createElement("code",null,"action_id")," lets you use the return value of this action in a later action."," ",pe.a.createElement("a",{href:"https://lab.github.com/docs/using-actions#accessing-the-result-of-executing-an-action"},"Learn more.")),name:"".concat(o,".").concat(a,".action_id"),value:n.action_id}),pe.a.createElement("div",{className:"d-flex text-small"},pe.a.createElement("button",{type:"button",className:"btn-link mr-3",onClick:function(){return i(o,a)}},"Remove action"),pe.a.createElement("a",{href:"/docs/actions/".concat(n.type),target:"_blank",rel:"noopener noreferrer"},"Docs for ",n.type," ",pe.a.createElement(Se.k,{size:12,icon:Se.f})))))}var Me=pe.a.createContext();function Be(e){var t=e.addAction,n=e.basename,a=Object(me.useRef)(null);var r=Object(me.useContext)(Me);return pe.a.createElement("details",{className:"position-relative select-menu details-reset details-overlay",ref:a},pe.a.createElement("summary",{className:"mb-3 btn btn-primary select-menu-button"},pe.a.createElement("span",{className:"mr-1"},"Add an action")),pe.a.createElement("div",{className:"text-mono dropdown-menu dropdown-menu-ne",style:{width:300,height:500}},pe.a.createElement("ul",{className:"overflow-auto height-full"},r.actions.map(function(e){return pe.a.createElement("li",{key:e,className:"Box-row p-0"},pe.a.createElement("button",{className:"py-2 px-3 btn-link d-block dropdown-item",type:"button",onClick:function(){a.current.removeAttribute("open"),t(n,e)}},e))}))))}function Ie(e){var t=e.stepIndex,n=e.actions,a=e.addAction,r=e.removeAction,o=e.basename,c=e.legend,s=void 0===c?"Actions":c,l=e.fetchSchema,i=e.error,u=e.openFile,d=(Array.isArray(n)?n:[n]).filter(Boolean);return pe.a.createElement("fieldset",{className:"border-top"},pe.a.createElement("legend",{className:"text-bold my-3 pr-3"},s),pe.a.createElement("ol",{className:"list-style-none"},d.map(function(e,n){return pe.a.createElement("li",{key:"".concat(t,":").concat(n),className:"mb-3"},pe.a.createElement(De,{basename:o,addAction:a,removeAction:r,stepIndex:t,action:e,actionIndex:n,fetchSchema:l,error:i,openFile:u}))})),pe.a.createElement(Be,{addAction:a,basename:o}))}var _e=pe.a.createContext();function He(e){var t=e.step,n=e.index,a=e.removeStep,r=e.addAction,o=e.removeAction,c=e.fetchSchema,s=e.error,l=e.isOpen,i=void 0!==l&&l,u=e.openFile;if(!t)return null;var d=Object(me.useContext)(_e).events,m=s&&s.details?s.details.filter(function(e){return"steps"===e.path[0]&&e.path[1]===n}):[];return pe.a.createElement("details",{className:"Box ".concat(m.length?"Box--danger":""),open:i},pe.a.createElement("summary",{className:"Box-header p-2 text-bold f4 ".concat(m.length?"Box--danger bg-red-light":""),style:{borderBottom:"none"}},t.title||"Untitled step"," ",m.length?pe.a.createElement("span",{className:"Counter Counter--gray"},m.length):null),pe.a.createElement("fieldset",{className:"Box-body border-top p-0"},pe.a.createElement("div",{className:"pt-3 px-3 pb-1"},pe.a.createElement(we,{label:"Step title",name:"steps.".concat(n,".title"),value:t.title,required:!0}),pe.a.createElement(we,{label:"Step description",name:"steps.".concat(n,".description"),value:t.description,required:!0}),pe.a.createElement(we,{label:"Step button link",type:"url",name:"steps.".concat(n,".link"),value:t.link}),pe.a.createElement(we,{label:"Step video",description:"An optional YouTube or Vimeo embeddable video URL.",type:"text",name:"steps.".concat(n,".video"),value:t.video,placeholder:"https://youtube.com/embed/w3jLJU7DT5E"}),d?pe.a.createElement(Le,{label:"Event trigger",description:pe.a.createElement(pe.a.Fragment,null,"Run this step's actions when this event is triggered in the user's repository. ",pe.a.createElement("a",{href:"https://developer.github.com/v3/activity/events/types/"},"See available events.")),name:"steps.".concat(n,".event"),value:t.event,options:d,required:!0}):pe.a.createElement("span",null,"Fetching list of events..."),pe.a.createElement(Ie,{addAction:r,removeAction:o,stepIndex:n,actions:t.actions,basename:"steps.".concat(n,".actions"),fetchSchema:c,error:s,openFile:u})),pe.a.createElement("div",{className:"px-3 py-2 border-top text-small"},pe.a.createElement("button",{className:"btn-link",type:"button",onClick:function(){return a(n)}},"Remove step"))))}var Ve=n(341),We=n.n(Ve);function Je(e){var t,n=e.value,a=e.onChange,r=e.path;r.endsWith(".yml")?t="yaml":r.endsWith(".md")&&(t="markdown");var o="border rounded-1 flex-auto overflow-auto";"config.yml"===r&&(o+=" rounded-top-0");return pe.a.createElement("div",{className:o},pe.a.createElement(We.a,{language:t,value:n,options:{minimap:{enabled:!1},wordWrap:"on"},onChange:a,height:"100%"}))}function Ue(e){var t=e.json,n=e.addAction,a=e.removeAction,r=e.fetchSchema,o=e.error,c=e.openFile,s=o&&o.details?o.details.filter(function(e){return"before"===e.path[0]}):[];return pe.a.createElement("details",{className:"Box ".concat(s.length?"Box--danger":""),open:!0},pe.a.createElement("summary",{className:"Box-header p-2 text-bold f4 ".concat(s.length?"Box--danger bg-red-light":""),style:{borderBottom:"none"}},"Course information ",s.length?pe.a.createElement("span",{className:"Counter Counter--gray"},s.length):null),pe.a.createElement("div",{className:"Box-body border-top mb-0"},pe.a.createElement(we,{label:"Title",name:"title",value:t.title,required:!0}),pe.a.createElement(we,{label:"Tagline",name:"tagline",value:t.tagline,required:!0}),pe.a.createElement(we,{label:"Description",name:"description",value:t.description,required:!0}),pe.a.createElement(qe,{legend:"Template",description:"Information about the template repository"},pe.a.createElement(we,{label:"Repository to copy",description:"When a user registers for the course, create this repository for them.",name:"template.repo",value:t.template?t.template.repo:"",required:!0}),pe.a.createElement(we,{label:"Name of repository to be created on user account",description:"When creating a new repository for the user, what should it be named?",name:"template.name",value:t.template?t.template.name:"",required:!0}),pe.a.createElement(we,{label:"Repository description",description:"The description of the repository that will be created.",name:"template.description",value:t.template?t.template.description:"",required:!0})),pe.a.createElement(Ae,{label:"Tags",name:"tags",optionKey:"tags",value:t.tags}),pe.a.createElement(Ie,{legend:"Actions when the repository is created",addAction:n,removeAction:a,stepIndex:0,actions:t.before,basename:"before",fetchSchema:r,error:o,openFile:c})))}function Ke(e){var t,n=e.validate,a=e.error;return t=void 0===a?null:a?pe.a.createElement("span",{className:"text-red"},pe.a.createElement(Se.k,{icon:Se.j})," ",pe.a.createElement("span",null,a.details&&a.details.length)," error",a.details&&a.details.length>1?"s":""):pe.a.createElement("span",{className:"text-green"},pe.a.createElement(Se.k,{icon:Se.c})," Success!"),pe.a.createElement("div",{className:"p-2 border-top border-left border-right rounded-1 rounded-bottom-0 bg-gray"},pe.a.createElement("div",{className:"d-flex flex-items-center"},pe.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:n},"Validate"),pe.a.createElement("div",{className:"text-small ml-2"},t)),a&&pe.a.createElement(Pe,{error:a}))}var Ye=pe.a.createContext();function Ge(){var e=Object(me.useContext)(Ye).course;return Object(me.useMemo)(function(){return e?pe.a.createElement(pe.a.Fragment,null,"published"===e.state&&pe.a.createElement("p",{className:"flash flash-warn d-flex mb-3"},pe.a.createElement("span",{className:"height-full mr-1"},pe.a.createElement(Se.k,{icon:Se.a,size:14})),"You're about to commit to a published course!"),pe.a.createElement("input",{className:"btn btn-block btn-primary btn-sm",type:"submit",value:"Commit to ".concat(e.branch||"master")})):pe.a.createElement("input",{className:"btn btn-block btn-primary btn-sm",type:"submit",disabled:!0,value:"Commit"})},[e])}function Ze(e){var t=e.files,n=Object(me.useState)(null),a=r()(n,2),o=a[0],c=a[1],s=Object(me.useState)(!1),l=r()(s,2),i=l[0],u=l[1];Object(me.useEffect)(function(){c(null)},[t]);var d=Object(me.useRef)(null),m=Object(me.useContext)(Ye).course,p=t.filter(function(e){return e.isChanged});function f(e){return h.apply(this,arguments)}function h(){return(h=U()(W.a.mark(function e(n){var a,r,o,s;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),u(!0),a=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),r=t.filter(function(e){return e.isChanged}),e.next=6,fetch("".concat(location.pathname,"/commit"),{method:"POST",body:JSON.stringify({files:r,message:d.current.value,oid:m.sha}),headers:{"Content-Type":"application/json","CSRF-Token":a}});case 6:return o=e.sent,e.next=9,o.json();case 9:s=e.sent,c(s),u(!1);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}return window.addEventListener("beforeunload",function(e){t.filter(function(e){return e.isChanged}).length>0&&(e.preventDefault(),e.returnValue="")}),Object(me.useMemo)(function(){if(0===p.length)return pe.a.createElement("p",{className:"m-0"},"You don't have any changes to commit yet.");if(i)return pe.a.createElement("p",null,"Loading...");if(null!==o){var e=o.success?"Success! Your changes have been pushed.":o.message;return pe.a.createElement("p",{className:"flash flash-".concat(o.success?"success":"error")},e)}return pe.a.createElement("form",{onSubmit:f},pe.a.createElement("p",{className:"text-small text-gray mb-1"},pe.a.createElement(Se.k,{icon:Se.h,className:"bg-pending v-align-middle",size:10})," ",p.length," changed file(s)"),pe.a.createElement("textarea",{className:"text-mono text-small width-full form-control mb-3",ref:d,placeholder:"Add a commit message..."}),pe.a.createElement(Ge,null))},[m,i,o,p.length])}function Qe(e){var t=e.addFileToTree,n=e.addFile,a=e.tree,o=Object(me.useState)(!1),c=r()(o,2),s=c[0],l=c[1],i=Object(me.useRef)();return Object(me.useEffect)(function(){s&&i.current&&i.current.focus()},[s]),s?pe.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r=i.current.value;r?a.some(function(e){return e.path===r})||(t(r),n(r),i.current.value="",l(!1)):l(!1)},className:"d-flex"},pe.a.createElement("input",{style:{minWidth:0},className:"form-control input-sm rounded-right-0 border-right-0",placeholder:"responses/my-file.md",type:"text",ref:i,required:!0}),pe.a.createElement("input",{className:"btn btn-sm BtnGroup-item",type:"submit",value:"Add file"})):pe.a.createElement("button",{className:"btn btn-sm",onClick:function(){return l(!0)}},"Add file")}function Xe(e){var t=e.tree,n=e.currentFile,a=e.nested,r=void 0===a?0:a,o=e.openFile,c="text-gray-light py-1 px-2 text-small filter-item btn-link width-full text-left";return pe.a.createElement("ul",{className:"list-style-none pt-0",style:{paddingLeft:10*r}},t.map(function(e){var t=e.path.split("/"),a=t[t.length-1];if("blob"===e.type){var s=c;return n===e.path&&(s+=" selected"),pe.a.createElement("li",{key:e.path},pe.a.createElement("button",{className:s,onClick:function(){return o(e.path)}},a))}return"tree"===e.type?pe.a.createElement(pe.a.Fragment,{key:e.path},pe.a.createElement("li",null,pe.a.createElement("details",{open:e.children.some(function(e){return n.startsWith(e.path)})},pe.a.createElement("summary",{className:c},a),pe.a.createElement(Xe,{tree:e.children,nested:r+1,currentFile:n,openFile:o})))):null}))}function $e(e){var t=e.files,n=e.currentFile,a=e.addFile,r=e.openFile,o=Object(me.useContext)(Fe),c=o.tree,s=o.addFileToTree,l=o.loading,i=t.filter(function(e){return e.isChanged}).length,u=function(e){return function e(t,n){var a=[],r=!0,o=!1,c=void 0;try{for(var s,l=function(){var r=s.value,o=r.path.split("/");if("blob"===r.type&&(1===o.length||n&&r.path==="".concat(n,"/").concat(o[o.length-1])))return a.push(r),"continue";if("tree"===r.type&&(1===o.length||n)){var c=t.filter(function(e){return e.path.startsWith(r.path)&&e.path!==r.path});a.push(je()({},r,{children:e(c,r.path)}))}},i=t[Symbol.iterator]();!(r=(s=i.next()).done);r=!0)l()}catch(e){o=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw c}}return a}(e)}(c);return Object(me.useMemo)(function(){if(l){var e=pe.a.createElement("div",{className:"text-small py-1 px-2 filter-item d-block anim-pulse border"}," ");return pe.a.createElement("div",{className:"height-full d-flex flex-column"},pe.a.createElement("div",{className:"p-3 file-tree filter-list flex-auto overflow-auto"},e,e,e))}return pe.a.createElement("div",{className:"height-full d-flex flex-column anim-fade-in anim-fast"},pe.a.createElement("div",{className:"p-3 file-tree filter-list flex-auto overflow-auto"},pe.a.createElement(Xe,{tree:u,currentFile:n,openFile:r}),pe.a.createElement(Qe,{tree:c,addFileToTree:s,addFile:a})),pe.a.createElement("div",{className:"text-small text-gray mt-3 p-3 border-top"},pe.a.createElement(Ze,{files:t,numChangedFiles:i})))},[l,n,c.length,i])}var et={draft:"Label--orange",published:"bg-green",disabled:"Label--gray-darker"};function tt(e){var t=e.course,n=function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}(t.state),a=et[t.state];return pe.a.createElement("span",{className:"ml-2 Label ".concat(a)},n)}var nt=n(342),at=n.n(nt);function rt(e){var t=e.course,n=Object(me.useState)(null),a=r()(n,2),o=a[0],c=a[1],s=Object(me.useRef)(null),l=Object(me.useState)(!1),i=r()(l,2),u=i[0],d=i[1],m=Object(me.useState)(null),p=r()(m,2),f=p[0],h=p[1],v=f&&new RegExp("^".concat(f),"i");function b(){return(b=U()(W.a.mark(function e(){var t,n;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(location.pathname,"/branches"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}if(Object(me.useEffect)(function(){!function(){b.apply(this,arguments)}()},[]),!o)return null;function y(){return(y=U()(W.a.mark(function e(){var t,n,a;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e.next=4,fetch("".concat(location.pathname,"/branch"),{method:"POST",headers:{"Content-Type":"application/json","CSRF-Token":t},body:JSON.stringify({branch:f})});case 4:if(!(n=e.sent).ok){e.next=12;break}return e.next=8,n.json();case 8:a=e.sent,location.replace("/".concat(a.full_name,"/admin/").concat(a.branch,"/builder")),e.next=13;break;case 12:d(!1);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}return pe.a.createElement("details",{className:"position-relative select-menu details-reset details-overlay",onToggle:function(){s.current.focus()}},pe.a.createElement("summary",{className:"text-white text-mono select-menu-button"},pe.a.createElement("span",{className:"mr-1"},t.branch||"master")),pe.a.createElement("div",{className:"dropdown-menu dropdown-menu-se mt-2 d-flex flex-column",style:{width:240,maxHeight:400}},pe.a.createElement("div",{className:"px-2 pt-1 pb-2 border-bottom"},pe.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(){y.apply(this,arguments)}(f)}},pe.a.createElement("input",{ref:s,className:"form-control width-full input-sm",placeholder:"Find or create a branch",onChange:function(e){return h(e.target.value)}}),f&&pe.a.createElement("button",{type:"submit",disabled:u,className:"btn btn-block btn-primary btn-sm mt-2"},"Create branch ",at()(f)),u&&pe.a.createElement("div",{className:"loader-bar"}))),pe.a.createElement("ul",{className:"text-mono overflow-auto height-full flex-auto"},o.filter(function(e){return!f||v.test(e)}).map(function(e){return pe.a.createElement("li",{key:e,className:"Box-row p-0"},pe.a.createElement("a",{href:"/".concat(t.full_name,"/admin/").concat("master"===e?"":"".concat(e,"/"),"builder"),className:"py-2 px-3 btn-link d-block dropdown-item ".concat(e===t.branch?"selected":"")},e))}))))}function ot(){var e=Object(me.useContext)(Ye).course;return Object(me.useMemo)(function(){return pe.a.createElement("header",{className:"py-3 p-responsive bg-gray-dark text-gray d-flex flex-items-center"},pe.a.createElement("a",{href:"/",className:"text-white d-flex flex-items-center"},pe.a.createElement(Se.k,{icon:Se.g,size:28}),pe.a.createElement("span",{className:"ml-2"},"Learning Lab")),e?pe.a.createElement(pe.a.Fragment,null,pe.a.createElement("span",{className:"mx-3"},"|"),pe.a.createElement(Se.k,{icon:Se.b,className:"mr-2"}),pe.a.createElement("a",{className:"text-white",href:"/".concat(e.full_name,"/admin")},e.full_name),pe.a.createElement(tt,{course:e}),pe.a.createElement(Se.k,{icon:Se.d,className:"mx-3"}),pe.a.createElement(Se.k,{icon:Se.e,className:"mr-2"}),pe.a.createElement(rt,{course:e})):pe.a.createElement("span",{className:"ml-3 text-white"},"Loading..."),pe.a.createElement("div",{style:{marginLeft:"auto"}},pe.a.createElement("span",{className:"mr-3 Label Label--outline border-green text-white tooltipped tooltipped-multiline tooltipped-sw","aria-label":"The Course Builder UI is currently in beta. We would love your feedback! Email learninglab@github.com."},"Beta"),pe.a.createElement("a",{href:"/".concat(e?e.full_name:"","/admin"),className:"text-gray-light"},pe.a.createElement(Se.k,{icon:Se.i,className:"v-align-middle mr-1"}),"Exit")))},[e])}var ct=n(343),st=Object(ct.combineProviders)();st.push(function(e){var t=e.children,n=Object(me.useState)([]),a=r()(n,2),o=a[0],c=a[1],s=Object(me.useState)(!0),l=r()(s,2),i=l[0],u=l[1];function d(){return(d=U()(W.a.mark(function e(){var t;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(location.pathname,"/actions"));case 2:return t=e.sent,e.t0=c,e.next=6,t.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1),u(!1);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(me.useEffect)(function(){!function(){d.apply(this,arguments)}()},[]),pe.a.createElement(Me.Provider,{value:{actions:o,loading:i}},t)}),st.push(function(e){var t=e.children,n=Object(me.useState)([]),a=r()(n,2),o=a[0],c=a[1],s=Object(me.useState)(!0),l=r()(s,2),i=l[0],u=l[1];function d(){return(d=U()(W.a.mark(function e(){var t;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(location.pathname,"/tree"));case 2:return t=e.sent,e.t0=c,e.next=6,t.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1),u(!1);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(me.useEffect)(function(){!function(){d.apply(this,arguments)}()},[]),pe.a.createElement(Fe.Provider,{value:{tree:o,addFileToTree:function(e){var t=e.split("/"),n=t.map(function(e,n,a){var r=t.slice(0,n+1).join("/");return o.some(function(e){return e.path===r})?null:n===a.length-1?{path:r,type:"blob"}:{path:r,type:"tree"}}).filter(Boolean);c([].concat(N()(o),N()(n)))},loading:i}},t)}),st.push(function(e){var t=e.children,n=Object(me.useState)(null),a=r()(n,2),o=a[0],c=a[1];function s(){return(s=U()(W.a.mark(function e(){var t;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(location.pathname,"/course"));case 2:return t=e.sent,e.t0=c,e.next=6,t.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(me.useEffect)(function(){!function(){s.apply(this,arguments)}()},[]),pe.a.createElement(Ye.Provider,{value:{course:o}},t)}),st.push(function(e){var t=e.children,n=Object(me.useState)(null),a=r()(n,2),o=a[0],c=a[1];function s(){return(s=U()(W.a.mark(function e(){var t;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(location.pathname,"/events"));case 2:return t=e.sent,e.t0=c,e.next=6,t.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(me.useEffect)(function(){!function(){s.apply(this,arguments)}()},[]);var l=[];if(o){var i=function(e){l.push(e);var t=o[e].map(function(t){return"".concat(e,".").concat(t)});l.push.apply(l,N()(t))};for(var u in o)i(u)}return pe.a.createElement(_e.Provider,{value:{events:l}},t)});var lt=st.master(),it=n(325),ut=n.n(it),dt=function(e){function t(e){var n;return u()(this,t),(n=oe()(this,se()(t).call(this,e))).state={json:{},loading:!0,error:void 0,schemas:{},currentFile:null,files:[],editorIsLoading:!1},n.updateCodeState=n.updateCodeState.bind(ie()(n)),n.onCodeEditorChange=n.onCodeEditorChange.bind(ie()(n)),n.handleFormChange=n.handleFormChange.bind(ie()(n)),n.addStep=n.addStep.bind(ie()(n)),n.removeStep=n.removeStep.bind(ie()(n)),n.addAction=n.addAction.bind(ie()(n)),n.removeAction=n.removeAction.bind(ie()(n)),n.fetchSchema=n.fetchSchema.bind(ie()(n)),n.validate=n.validate.bind(ie()(n)),n.openFile=n.openFile.bind(ie()(n)),n.addFile=n.addFile.bind(ie()(n)),n}return de()(t,e),m()(t,[{key:"updateCodeState",value:function(e){var t=this.state.files,n=t.findIndex(function(e){return"config.yml"===e.path});this.setState({json:e,files:[].concat(N()(t.slice(0,n)),[je()({},t[n],{isChanged:!0,content:ut.a.safeDump(e,{noRefs:!0})})],N()(t.slice(n+1)))})}},{key:"componentDidMount",value:function(){var e=U()(W.a.mark(function e(){var t;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(location.pathname,"/file?p=config.yml")).then(function(e){return e.text()});case 2:t=e.sent,this.setState({files:[{path:"config.yml",isChanged:!1,content:t}],json:ut.a.safeLoad(t),loading:!1,currentFile:0});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addFile",value:function(e){this.setState({currentFile:this.state.files.length,files:[].concat(N()(this.state.files),[{path:e,isChanged:!0,content:""}])})}},{key:"openFile",value:function(){var e=U()(W.a.mark(function e(t){var n,a,r;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=this.state.files.findIndex(function(e){return e.path===t}))>-1)){e.next=5;break}return e.abrupt("return",this.setState({currentFile:n,editorIsLoading:!1}));case 5:this.setState({editorIsLoading:!0});case 6:return e.next=8,fetch("".concat(location.pathname,"/file?p=").concat(t));case 8:if(!(a=e.sent).ok){e.next=16;break}return e.next=12,a.text();case 12:r=e.sent,this.setState({currentFile:this.state.files.length,files:[].concat(N()(this.state.files),[{isChanged:!1,path:t,content:r}]),editorIsLoading:!1}),e.next=18;break;case 16:this.setState({editorIsLoading:!1}),console.error(a.status);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchSchema",value:function(){var e=U()(W.a.mark(function e(t){var n,a,r;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.state.schemas[t])){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,fetch("".concat(location.pathname,"/actions/").concat(t));case 5:return a=e.sent,e.next=8,a.json();case 8:return r=e.sent,this.setState({schemas:je()({},this.state.schemas,ge()({},t,r))}),e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onCodeEditorChange",value:function(e){var t=this.state,n=t.currentFile,a=t.files,r={files:[].concat(N()(a.slice(0,n)),[je()({},a[n],{isChanged:!0,content:e})],N()(a.slice(n+1)))};if("config.yml"===a[n].path)if(e&&e.trim())try{r.json=ut.a.safeLoad(e)}catch(e){}else r.json={};this.setState(r)}},{key:"handleFormChange",value:function(e){var t=e.target,n=t.value,a=t.name;"checkbox"===e.target.type&&(n=e.target.checked);var r=ke.a.set(this.state.json,a,n);this.updateCodeState(r)}},{key:"addStep",value:function(){this.setState({addingStep:!0});var e=ke.a.push(this.state.json,"steps",{title:"New step",actions:[{type:"createIssue",title:"A new issue",body:"a-response-file.md"}]});this.updateCodeState(e)}},{key:"removeStep",value:function(e){if(confirm("Are you sure you want to remove this step?")){var t=ke.a.del(this.state.json,["steps",e]);this.updateCodeState(t)}}},{key:"addAction",value:function(e,t){var n=ke.a.push(this.state.json,e,{type:t});this.updateCodeState(n)}},{key:"removeAction",value:function(e,t){if(confirm("Are you sure you want to remove this action?")){var n=ke.a.del(this.state.json,[e,t].join("."));this.updateCodeState(n)}}},{key:"validate",value:function(){var e=U()(W.a.mark(function e(){var t,n,a,r;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),n=this.state.files.find(function(e){return"config.yml"===e.path}),e.next=4,fetch("".concat(location.pathname,"/validate"),{method:"PUT",body:JSON.stringify({input:n.content}),headers:{"Content-Type":"application/json","CSRF-Token":t}});case 4:if((a=e.sent).ok){e.next=12;break}return e.t0=this,e.next=9,a.text();case 9:return e.t1=e.sent,e.t2={error:e.t1},e.abrupt("return",e.t0.setState.call(e.t0,e.t2));case 12:return e.next=14,a.json();case 14:(r=e.sent).error?this.setState({error:r.error}):this.setState({error:null});case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.state,a=n.json,r=n.loading,o=n.error,c=n.currentFile,s=n.files,l=n.editorIsLoading,i=n.addingStep;return r?pe.a.createElement("div",{className:"d-flex height-full flex-column flex-items-center flex-justify-center"},pe.a.createElement(Se.k,{size:50,icon:Se.g,className:"anim-pulse"})):(e=l?"Loading...":s[c].content,pe.a.createElement(lt,null,pe.a.createElement("div",{className:"d-flex flex-column height-full"},pe.a.createElement(ot,null),pe.a.createElement("div",{className:"d-flex flex-auto overflow-auto"},pe.a.createElement("div",{style:{maxWidth:260,flexShrink:0,flexBasis:"100%"},className:"col-3 border-right bg-gray height-full overflow-auto"},pe.a.createElement($e,{files:s,addFile:this.addFile,currentFile:s[c].path,openFile:this.openFile})),pe.a.createElement("div",{className:"flex-auto col-5"},pe.a.createElement("div",{className:"p-3 height-full d-flex flex-column"},"config.yml"===s[c].path&&pe.a.createElement(Ke,{validate:this.validate,error:o}),pe.a.createElement(Je,{path:s[c].path,value:e,onChange:this.onCodeEditorChange,validate:this.validate}))),pe.a.createElement("aside",{className:"flex-auto col-4 bg-gray border-left height-full overflow-auto"},pe.a.createElement("form",{onChange:this.handleFormChange,className:"p-3"},pe.a.createElement(Ue,{json:a,addAction:this.addAction,removeAction:this.removeAction,fetchSchema:this.fetchSchema,error:o,openFile:this.openFile}),a.steps&&Array.isArray(a.steps)&&a.steps.length?pe.a.createElement(pe.a.Fragment,null,pe.a.createElement("h4",{className:"my-3"},"Steps"),pe.a.createElement("ol",{className:"list-style-none"},a.steps.map(function(e,n){return pe.a.createElement("li",{key:"steps:".concat(n),className:"mb-3"},pe.a.createElement(He,{step:e,index:n,removeStep:t.removeStep,addAction:t.addAction,removeAction:t.removeAction,fetchSchema:t.fetchSchema,error:o,isOpen:i&&n===a.steps.length-1,openFile:t.openFile}))}),pe.a.createElement("button",{onClick:this.addStep,type:"button",className:"btn btn-primary"},"Add a step"))):pe.a.createElement("div",{className:"mt-3 rounded-2 border-gray-light border-dashed p-5 text-center"},pe.a.createElement("h4",null,"Steps are what define the process of your course."),pe.a.createElement("button",{onClick:this.addStep,type:"button",className:"mt-3 btn btn-primary"},"Create the first step"))))))))}}]),t}(me.Component),mt=document.querySelector(".js-mount-course-builder");mt&&Object(fe.render)(pe.a.createElement(dt,null),mt);var pt=document.querySelector(".js-create-course-builder-form"),ft=document.querySelector(".js-create-course-console");if(pt){var ht=Array.from(pt.querySelectorAll('.select-menu input[type="radio"]')),vt=pt.querySelector(".js-create-course-visibility-picker"),bt=pt.querySelector(".js-create-course-public-only"),yt=pt.querySelector(".js-menu-target");ht.forEach(function(e){e.addEventListener("change",function(){var e=U()(W.a.mark(function e(t){var n,a;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,a=t.target.parentElement.querySelector(".avatar").getAttribute("src"),yt.querySelector("span").textContent=n,yt.querySelector("img").setAttribute("src",a),yt.closest(".js-course-owner-select-menu").removeAttribute("open"),e.next=7,fetch("/new/private-courses/".concat(n));case 7:e.sent.ok?(vt.style.display="block",bt.style.display="none"):(vt.style.display="none",bt.style.display="block");case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}),pt.addEventListener("submit",function(){var e=U()(W.a.mark(function e(t){var n,a,r,s,l,i;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=pt.querySelector('input[type="submit"]')).setAttribute("disabled",!0),a=Object(o.a)(),new K(a,ft).start(),v.on("console-end",function(e){var t=e.success,n=e.course;t&&window.location.replace("/".concat(n,"/admin/builder"))}),r={title:pt.querySelector("input#title").value,description:pt.querySelector("textarea#description").value,owner:ht.find(function(e){return e.checked}).value},(s=pt.querySelector('input[name="visibility"]:checked'))&&(r.visibility=s.value),l=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e.prev=11,e.next=14,fetch("/new",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","CSRF-Token":l},body:JSON.stringify(r)}).then(function(e){return e.json()});case 14:i=e.sent,n.removeAttribute("disabled"),i.success||(a.deleteSelf(),Object(c.default)({style:"error",body:i.message})),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(11),a.deleteSelf(),n.removeAttribute("disabled"),Object(c.default)({style:"error",body:e.t0.message});case 24:case"end":return e.stop()}},e,null,[[11,19]])}));return function(t){return e.apply(this,arguments)}}())}var gt=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Et=document.querySelectorAll(".js-delete-token-form");Et&&Et.forEach(function(e){e.addEventListener("submit",function(){var t=U()(W.a.mark(function t(n){return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,xt("delete",e.dataset.tokenId);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())});var jt=document.querySelector("#js-form-new-token");function xt(e,t){return kt.apply(this,arguments)}function kt(){return(kt=U()(W.a.mark(function e(t,n){var a,r,o;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"create"===t?(a={note:n},r="POST",o="new"):(a={id:n},r="DELETE",o="delete"),e.next=3,fetch("/settings/tokens/".concat(o),{body:JSON.stringify(a),headers:{"CSRF-Token":gt,"content-type":"application/json"},credentials:"same-origin",method:r});case 3:e.sent.ok?window.location.reload():Object(c.default)({body:"An error occurred and your token was not ".concat(t,"d."),style:"error"});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}jt&&jt.addEventListener("submit",function(){var e=U()(W.a.mark(function e(t){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,xt("create",jt.querySelector('input[name="note"]').value);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());var St=document.querySelector(".js-nav-account-button");St&&St.addEventListener("click",function(){var e=document.querySelector(".js-nav-account-popover"),t=document.querySelector(".js-nav-account-overlay");e.style.display="block",t.style.display="block",St.setAttribute("aria-expanded",!0),t.addEventListener("click",function(){e.style.display="none",t.style.display="none",St.setAttribute("aria-expanded",!1)})})},69:function(e,t,n){"use strict";var a=n(92),r=n.n(a),o=n(93),c=n.n(o),s=function(){function e(t){if(r()(this,e),t)this.DOMElement=t;else{var n=document.createElement("div");n.classList.add("loader-bar"),document.body.appendChild(n),this.DOMElement=n}}return c()(e,[{key:"deleteSelf",value:function(){this.DOMElement.parentNode.removeChild(this.DOMElement)}}]),e}();t.a=function(e){return new s(e)}}});
//# sourceMappingURL=main.901f64d808823ce3878c.js.map